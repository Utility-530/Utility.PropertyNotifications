<Window x:Class="Utility.WPF.SandBox.TrackWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Utility.WPF.SandBox"
        xmlns:conv="http://schemas.utility.com/converters"
        mc:Ignorable="d"
        Title="TrackWindow" Height="450" Width="800">
    <FrameworkElement.Resources>      

        <Style TargetType="{x:Type Control}" x:Key="VisibilityIndicator2Button">
            <Setter Property="local:ActualVisibility.TrackVisibility" Value="True" />

            <!-- IMPORTANT: Use non-frozen SolidColorBrushes -->
            <Setter Property="Background">
                <Setter.Value>
                    <SolidColorBrush Color="#FF1D1D4E"/>
                </Setter.Value>          
            </Setter>
            <Setter Property="BorderBrush">
                <Setter.Value>
                    <SolidColorBrush Color="#FF0CDC0F"/>
                </Setter.Value>
            </Setter>

            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="MinWidth" Value="60"></Setter>
            <Setter Property="MinHeight" Value="30"></Setter>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Control}" >
                        <Border x:Name="border"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        MinHeight="20" MinWidth="40"
                        CornerRadius="4"
                      >

                            <!--<ContentPresenter HorizontalAlignment="Center"
                                      VerticalAlignment="Center"/>-->
                            <StackPanel>

                                <TextBlock 
                                    Foreground="White"
                                    Text="{Binding Path=(local:ActualVisibility.IsActuallyVisible), RelativeSource={RelativeSource TemplatedParent}, Converter={x:Static conv:DefaultConverter.Instance}}" />
                            </StackPanel>                       
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </FrameworkElement.Resources>

    <DockPanel>
      
        <TabControl>
            <TabItem Header="Visibility Tracker" >
                <Control 
                     Style="{StaticResource VisibilityIndicator2Button}"
                    x:Name="One"
                    Width="150"
                    Height="50"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                     />
            </TabItem>
            <TabItem Header="Visibility Tracker 2" >
                <Control
                    Style="{StaticResource VisibilityIndicator2Button}"
                    x:Name="Two"
                    Width="150"
                    Height="50"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                   
                    />
            </TabItem>

        </TabControl>

        <StackPanel DockPanel.Dock="Left">
            <TextBlock Text="{Binding Path=(local:ActualVisibility.IsActuallyVisible), ElementName=One }">
      
            </TextBlock>
            <TextBlock Text="{Binding Path=(local:ActualVisibility.IsActuallyVisible), ElementName=Two }"></TextBlock>
        </StackPanel>

    </DockPanel>
</Window>
