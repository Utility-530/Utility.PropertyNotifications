<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:Utility.WPF.Controls.Trees">

    <local:HorizontalLineConverter x:Key="HorizontalLineConverter" />
    <local:VerticalLineConverter x:Key="VerticalLineConverter" />

    <Style x:Key="TopDown_GraphStyle" TargetType="TreeViewItem">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TreeViewItem">
                    <Grid>
                        <!--  Main Grid  -->
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <!--  Horizontal line  -->
                            <RowDefinition Height="Auto" />
                            <!--  The top row contains the item's content.  -->
                            <RowDefinition Height="Auto" />
                            <!--  Item presenter(children)  -->
                        </Grid.RowDefinitions>

                        <Grid Grid.Row="0">
                            <!--  Horizontal line grid  -->
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <!--  Horizontal line to the left  -->
                            <Rectangle
                                Grid.Column="0"
                                HorizontalAlignment="Stretch"
                                SnapsToDevicePixels="true"
                                Stroke="Black">
                                <Rectangle.Height>
                                    <Binding
                                        Converter="{StaticResource HorizontalLineConverter}"
                                        ConverterParameter="left"
                                        Mode="OneWay"
                                        RelativeSource="{RelativeSource AncestorLevel=1,
                                                                        AncestorType={x:Type TreeViewItem}}" />
                                </Rectangle.Height>
                            </Rectangle>

                            <!--  Horizontal line to the right  -->
                            <Rectangle
                                Grid.Column="1"
                                HorizontalAlignment="Stretch"
                                SnapsToDevicePixels="true"
                                Stroke="Black">
                                <Rectangle.Height>
                                    <Binding
                                        Converter="{StaticResource HorizontalLineConverter}"
                                        ConverterParameter="right"
                                        Mode="OneWay"
                                        RelativeSource="{RelativeSource AncestorLevel=1,
                                                                        AncestorType={x:Type TreeViewItem}}" />
                                </Rectangle.Height>
                            </Rectangle>
                        </Grid>
                        <!--  End of Horizontal line grid  -->

                        <Grid Grid.Row="1">
                            <!--  Header grid  -->
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <!--  Vert. line above node  -->
                                <RowDefinition Height="*" />
                                <!--  Header  -->
                                <RowDefinition Height="Auto" />
                                <!--  Vert line below node  -->
                            </Grid.RowDefinitions>
                            <!--  Vertical line above node  -->
                            <Rectangle
                                Grid.Row="0"
                                Height="10"
                                SnapsToDevicePixels="true"
                                Stroke="Black">
                                <Rectangle.Width>
                                    <Binding
                                        Converter="{StaticResource VerticalLineConverter}"
                                        ConverterParameter="top"
                                        Mode="OneWay"
                                        RelativeSource="{RelativeSource AncestorLevel=1,
                                                                        AncestorType={x:Type TreeViewItem}}" />
                                </Rectangle.Width>
                            </Rectangle>

                            <!--  Header  -->
                            <ContentPresenter
                                Grid.Row="1"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                ContentSource="Header" />

                            <!--  Vertical line below node  -->
                            <Rectangle
                                Grid.Row="2"
                                Height="10"
                                SnapsToDevicePixels="true"
                                Stroke="Black">
                                <Rectangle.Width>
                                    <Binding
                                        Converter="{StaticResource VerticalLineConverter}"
                                        ConverterParameter="bottom"
                                        Mode="OneWay"
                                        RelativeSource="{RelativeSource AncestorLevel=1,
                                                                        AncestorType={x:Type TreeViewItem}}" />
                                </Rectangle.Width>
                            </Rectangle>
                        </Grid>
                        <!--  End of Header grid  -->

                        <ItemsPresenter Grid.Row="2" />
                        <!--  Children  -->

                    </Grid>
                    <!--  End of Main grid  -->
                </ControlTemplate>
            </Setter.Value>
        </Setter>

        <Setter Property="ItemsPanel">
            <Setter.Value>
                <ItemsPanelTemplate>
                    <StackPanel
                        HorizontalAlignment="Center"
                        IsItemsHost="True"
                        Orientation="Horizontal" />
                </ItemsPanelTemplate>
            </Setter.Value>
        </Setter>
    </Style>


    <Style x:Key="LeftToRight_GraphStyle" TargetType="TreeViewItem">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TreeViewItem">
                    <Grid>
                        <!--  Main Grid  -->
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <!--  Horizontal line  -->
                            <ColumnDefinition Width="Auto" />
                            <!--  The top row contains the item's content.  -->
                            <ColumnDefinition Width="Auto" />
                            <!--  Item presenter(children)  -->
                        </Grid.ColumnDefinitions>

                        <Grid Grid.Column="0">
                            <!--  Horizontal line grid  -->
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>

                            <!--  Horizontal line to the left  -->
                            <Rectangle
                                Grid.Row="0"
                                VerticalAlignment="Stretch"
                                SnapsToDevicePixels="true"
                                Stroke="Black">
                                <Rectangle.Width>
                                    <Binding
                                        Converter="{StaticResource HorizontalLineConverter}"
                                        ConverterParameter="left"
                                        Mode="OneWay"
                                        RelativeSource="{RelativeSource AncestorLevel=1,
                                                                        AncestorType={x:Type TreeViewItem}}" />
                                </Rectangle.Width>
                            </Rectangle>

                            <!--  Horizontal line to the right  -->
                            <Rectangle
                                Grid.Row="1"
                                VerticalAlignment="Stretch"
                                SnapsToDevicePixels="true"
                                Stroke="Black">
                                <Rectangle.Width>
                                    <Binding
                                        Converter="{StaticResource HorizontalLineConverter}"
                                        ConverterParameter="right"
                                        Mode="OneWay"
                                        RelativeSource="{RelativeSource AncestorLevel=1,
                                                                        AncestorType={x:Type TreeViewItem}}" />
                                </Rectangle.Width>
                            </Rectangle>
                        </Grid>
                        <!--  End of Horizontal line grid  -->

                        <Grid Grid.Column="1">
                            <!--  Header grid  -->
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <!--  Vert. line above node  -->
                                <ColumnDefinition Width="*" />
                                <!--  Header  -->
                                <ColumnDefinition Width="Auto" />
                                <!--  Vert line below node  -->
                            </Grid.ColumnDefinitions>
                            <!--  Vertical line above node  -->
                            <Rectangle
                                Grid.Column="0"
                                Width="10"
                                SnapsToDevicePixels="true"
                                Stroke="Black">
                                <Rectangle.Height>
                                    <Binding
                                        Converter="{StaticResource VerticalLineConverter}"
                                        ConverterParameter="top"
                                        Mode="OneWay"
                                        RelativeSource="{RelativeSource AncestorLevel=1,
                                                                        AncestorType={x:Type TreeViewItem}}" />
                                </Rectangle.Height>
                            </Rectangle>

                            <!--  Header  -->
                            <ContentPresenter
                                Grid.Column="1"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                ContentSource="Header" />

                            <!--  Vertical line below node  -->
                            <Rectangle
                                Grid.Column="2"
                                Width="10"
                                SnapsToDevicePixels="true"
                                Stroke="Black">
                                <Rectangle.Height>
                                    <Binding
                                        Converter="{StaticResource VerticalLineConverter}"
                                        ConverterParameter="bottom"
                                        Mode="OneWay"
                                        RelativeSource="{RelativeSource AncestorLevel=1,
                                                                        AncestorType={x:Type TreeViewItem}}" />
                                </Rectangle.Height>
                            </Rectangle>
                        </Grid>
                        <!--  End of Header grid  -->

                        <ItemsPresenter Grid.Column="2" />
                        <!--  Children  -->

                    </Grid>
                    <!--  End of Main grid  -->
                </ControlTemplate>
            </Setter.Value>
        </Setter>

        <Setter Property="ItemsPanel">
            <Setter.Value>
                <ItemsPanelTemplate>
                    <StackPanel
                        VerticalAlignment="Center"
                        IsItemsHost="True"
                        Orientation="Vertical" />
                </ItemsPanelTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>