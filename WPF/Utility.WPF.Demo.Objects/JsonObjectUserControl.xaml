<UserControl
    x:Class="Utility.WPF.Demo.Objects.JsonObjectUserControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local="clr-namespace:Utility.WPF.Demo.Objects"
    xmlns:sys="clr-namespace:System;assembly=System.Runtime"
    xmlns:view="http://schemas.utility.com/objects"
    d:DesignHeight="450"
    d:DesignWidth="800"
    mc:Ignorable="d">
    <UserControl.Resources>
        <sys:Exception x:Key="exception" />

        <DataTemplate x:Key="Ellipse">
            <UniformGrid Rows="1" >
                <StackPanel>
                    <TextBlock Text="{Binding Name}" FontWeight="Bold" Margin="0,0,0,4" />
                    <!--<TextBlock Text="{Binding Schema.Description}" Margin="0,0,0,4"
                               Visibility="{Binding Schema.Description, Converter={StaticResource VisibilityConverter}}" />-->
                </StackPanel>
                <Ellipse Fill="Red" Height="20" Width="20"/>
            </UniformGrid>
        </DataTemplate>

        <DataTemplate x:Key="MessageTemplate">
            <UniformGrid Rows="1" >
                <StackPanel>
                    <TextBlock Text="{Binding Name}" FontWeight="ExtraBold" Margin="0,0,0,4" />
                    <!--<TextBlock Text="{Binding Schema.Description}" Margin="0,0,0,4"
                               Visibility="{Binding Schema.Description, Converter={StaticResource VisibilityConverter}}" />-->
                </StackPanel>
                <Ellipse Fill="Blue" Height="20" Width="20"/>
            </UniformGrid>
        </DataTemplate>

        <DataTemplate x:Key="NumberTemplate">
            <ContentControl Style="{DynamicResource LabelValueContent}">
                <Ellipse Fill="Blue" Height="20" Width="20"/>
            </ContentControl>
        </DataTemplate>
        
        

        <x:Array x:Key="properties" Type="{x:Type view:SchemaProperty}">
            <view:SchemaProperty Name="First" Format="Ellipse"></view:SchemaProperty>
        </x:Array>

        <x:Array x:Key="types" Type="{x:Type view:SchemaType}">
            <view:SchemaType Name="Character" Properties="{StaticResource properties}"/>
        </x:Array>

        <view:Schema x:Key="CharacterSchema" Types="{StaticResource types}"/>


        <ObjectDataProvider x:Key="SchemaFromFile"
                ObjectType="{x:Type local:SchemaLoader}"
                MethodName="LoadSchema" >
        </ObjectDataProvider>
        
        
    </UserControl.Resources>
    <DockPanel Name="DockPanel" Visibility="Visible">
        <StackPanel DockPanel.Dock="Top">

            <Label
                Margin="5"
                Content="double-click a value to copy to clipboard"
                FontWeight="DemiBold" />
            <Label
                Margin="5"
                Content="Hover over items to view tool-tip"
                FontWeight="DemiBold" />
        </StackPanel>
        <Grid>
            <UniformGrid>
             
                <view:JsonControl Object="{StaticResource exception}" Schema="{Binding Source={StaticResource SchemaFromFile}}"/>
                <view:JsonControl Object="{StaticResource Characters}" Schema="{StaticResource CharacterSchema}"/>
                <DockPanel>
                    <Button DockPanel.Dock="Top" 
                        Click="Button_Click"
                        Height="30" Width="200">
                        Load from clipboard
                    </Button>
                    <view:JsonControl x:Name="JsonControl" />
                </DockPanel>
                <Grid>
                    <Grid.Resources>
                        <!--  DataTemplate for Published Date column defined in Grid.Resources.  PublishDate is a property on the ItemsSource of type DateTime  -->
                        <DataTemplate x:Key="DateTemplate">
                            <view:JsonControl Object="{Binding}" />
                        </DataTemplate>
                        <!--  DataTemplate for the Published Date column when in edit mode.  -->
                        <DataTemplate x:Key="EditingDateTemplate">
                            <DatePicker />
                        </DataTemplate>
                    </Grid.Resources>
                    <DataGrid AutoGenerateColumns="False" ItemsSource="{StaticResource Characters}">
                        <DataGrid.Columns>
                            <!--  Custom column that shows the published date  -->
                            <DataGridTemplateColumn
                                CellEditingTemplate="{StaticResource EditingDateTemplate}"
                                CellTemplate="{StaticResource DateTemplate}"
                                Header="Publish Date" />
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
                <!--<ScrollViewer VerticalScrollBarVisibility="Auto">
                    <forge:DynamicForm Model="{x:Static local:Login.Instance}" Margin="16" />
                    </ScrollViewer>-->

                <!--<ScrollViewer VerticalScrollBarVisibility="Auto">
                    <forge:DynamicForm Model="{StaticResource Bart}" Margin="16" />
                </ScrollViewer>-->
            </UniformGrid>
        </Grid>
    </DockPanel>
</UserControl>