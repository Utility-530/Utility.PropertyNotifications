<UserControl x:Class="Utility.WPF.Demo.Buttons.SwitchUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Utility.WPF.Demo.Buttons" xmlns:view="http://schemas.utility.com/buttons" xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <FrameworkElement.Resources>
        <Style TargetType="{x:Type ToggleButton}" BasedOn="{StaticResource {x:Type ToggleButton}}" x:Key="SwitchToggleButton">
            <Setter Property="BorderBrush" Value="Black"/>
            <Setter Property="Background" Value="Gray"/>
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="Width" Value="70"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ToggleButton}">
                        <Grid>
                            <Border x:Name="BackBorder" Background="{TemplateBinding Background}" BorderThickness="{TemplateBinding BorderThickness}" BorderBrush="{TemplateBinding BorderBrush}"/>
                            <TextBlock x:Name="Off" Margin="30,0,0,0" VerticalAlignment="Center"  HorizontalAlignment="Center"><Run Text="OFF"/></TextBlock>
                            <TextBlock x:Name="On" Margin="0,0,30,0" VerticalAlignment="Center"  HorizontalAlignment="Center"><Run Text="ON"/></TextBlock>
                            <Border x:Name="Slider" Background="LightGray" Width="30" Height="30" HorizontalAlignment="Left" BorderThickness="{TemplateBinding BorderThickness}" BorderBrush="{TemplateBinding BorderBrush}"/>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <EventTrigger RoutedEvent="Border.Loaded" SourceName="Slider">
                                <SkipStoryboardToFill BeginStoryboardName="checkedSB" />
                                <SkipStoryboardToFill BeginStoryboardName="checkedSB2" />
                                <SkipStoryboardToFill BeginStoryboardName="uncheckedSB" />
                                <SkipStoryboardToFill BeginStoryboardName="uncheckedSB2" />
                            </EventTrigger>
                            <DataTrigger Binding="{Binding IsChecked, RelativeSource={RelativeSource Self}}" Value="true">
                                <DataTrigger.EnterActions>
                                    <BeginStoryboard x:Name="checkedSB">
                                        <Storyboard Storyboard.TargetProperty="Margin" Storyboard.TargetName="Slider">
                                            <ThicknessAnimation To="40,0,0,0" Duration="00:00:00.2"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                    <BeginStoryboard x:Name="checkedSB2">
                                        <Storyboard Storyboard.TargetProperty="(Control.Background).(SolidColorBrush.Color)">
                                            <ColorAnimation To="LightSeaGreen" Duration="00:00:00.3"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </DataTrigger.EnterActions>
                                <DataTrigger.ExitActions>
                                    <BeginStoryboard x:Name="uncheckedSB">
                                        <Storyboard Storyboard.TargetProperty="Margin" Storyboard.TargetName="Slider">
                                            <ThicknessAnimation To="0" Duration="00:00:00.2"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                    <BeginStoryboard x:Name="uncheckedSB2">
                                        <Storyboard Storyboard.TargetProperty="(Control.Background).(SolidColorBrush.Color)">
                                            <ColorAnimation To="{x:Null}" Duration="00:00:00.3"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </DataTrigger.ExitActions>
                                
                                
                            </DataTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <!--<Style.Triggers>
                <EventTrigger RoutedEvent="ToggleButton.Loaded">
                    <SkipStoryboardToFill BeginStoryboardName="checkedSB" />
                    <SkipStoryboardToFill BeginStoryboardName="uncheckedSB" />
                </EventTrigger>
                <DataTrigger Binding="{Binding IsChecked, RelativeSource={RelativeSource Self}}" Value="true">
                    <DataTrigger.EnterActions>
                        <BeginStoryboard Name="checkedSB">
                            <Storyboard Storyboard.TargetProperty="Width">
                                <DoubleAnimation To="150"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </DataTrigger.EnterActions>
                    <DataTrigger.ExitActions>
                        <BeginStoryboard Name="uncheckedSB">
                            <Storyboard Storyboard.TargetProperty="Width">
                                <DoubleAnimation To="50"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </DataTrigger.ExitActions>
                </DataTrigger>
            </Style.Triggers>-->
        </Style>
    </FrameworkElement.Resources>
    <UniformGrid>
        <ToggleButton Style="{StaticResource SwitchToggleButton}"></ToggleButton>
        
        <view:ImageButton
                x:Name="ImageButton"
                Margin="15,0,15,0"
                Image="pack://application:,,,/Utility.WPF.Demo.Data;component/Images/Settings.png"
                PressedImage="pack://application:,,,/Utility.WPF.Demo.Data;component/Images/bar-chart.png" />

        <Viewbox Width="200" Height="50">
            <view:EnumToggleButton
                        xmlns:enum="clr-namespace:Utility.Enums;assembly=Utility.Enums"
                        x:Name="TenseControl"
                        HorizontalAlignment="Center"
                        Enum="{x:Type enum:Tense}" />
        </Viewbox>

        <GroupBox Header="Interactivity">
            <Grid Width="100" Height="60">
                <Button x:Name="OptionsButton">
                    Option
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="Click">
                            <i:ChangePropertyAction PropertyName="Visibility" Value="Collapsed" />
                            <i:ChangePropertyAction
                                PropertyName="Visibility"
                                TargetObject="{Binding ElementName=OptionsBackButton}"
                                Value="Visible" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </Button>

                <Button x:Name="OptionsBackButton" Visibility="Collapsed">
                    Back
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="Click">
                            <i:ChangePropertyAction PropertyName="Visibility" Value="Collapsed" />
                            <i:ChangePropertyAction
                                PropertyName="Visibility"
                                TargetObject="{Binding ElementName=OptionsButton}"
                                Value="Visible" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </Button>
            </Grid>
        </GroupBox>


    </UniformGrid>
</UserControl>
