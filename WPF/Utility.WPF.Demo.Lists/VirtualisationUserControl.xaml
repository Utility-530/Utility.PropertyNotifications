<UserControl x:Class="Utility.WPF.Demo.Lists.VirtualisationUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:Utility.WPF.Demo.Lists"
             mc:Ignorable="d"
             xmlns:demo="http://schemas.utility.com/demo_data" xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
             d:DataContext="{d:DesignInstance local:VirtualisationViewModel}"

             d:DesignHeight="450" d:DesignWidth="800">
    <FrameworkElement.DataContext>
        <local:VirtualisationViewModel></local:VirtualisationViewModel>
    </FrameworkElement.DataContext>
    <FrameworkElement.Resources>
        <Style TargetType="{x:Type TextBlock}">
            <Setter Property="Margin" Value="4"></Setter>
        </Style>
    </FrameworkElement.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="50"></RowDefinition>
            <RowDefinition Height="500"></RowDefinition>
        </Grid.RowDefinitions>
        <WrapPanel>
            <TextBlock Text="First"></TextBlock>
            <TextBlock Text="{Binding First}"></TextBlock>
            <TextBlock Text="Second"></TextBlock>

            <TextBlock Text="{Binding Second}"></TextBlock>
        </WrapPanel>
        <ListView ItemsSource="{Binding Collection}"
                  local:TrackVisibleItems.Enabled="True"
                  local:TrackVisibleItems.FirstVisibleIndex="{Binding First, Mode=OneWayToSource}"
                  local:TrackVisibleItems.LastVisibleIndex="{Binding Second, Mode=OneWayToSource}"

                  Grid.Row="1">
            <ListView.View>
                <GridView AllowsColumnReorder="true" ColumnHeaderToolTip="Employee Information">
                    <GridViewColumn DisplayMemberBinding="{Binding Path=Sector}" Header="Sector" Width="200" />
                    <GridViewColumn DisplayMemberBinding="{Binding Path=Name}" Width="300">
                        <GridViewColumnHeader>Name
                            <GridViewColumnHeader.ContextMenu>
                                <ContextMenu Name="LastNameCM">
                                    <MenuItem Header="Ascending" />
                                    <MenuItem Header="Descending" />
                                </ContextMenu>
                            </GridViewColumnHeader.ContextMenu>
                        </GridViewColumnHeader>
                    </GridViewColumn>
                    <GridViewColumn DisplayMemberBinding="{Binding Path=Key}" Header="Key" Width="200" />
                    <GridViewColumn DisplayMemberBinding="{Binding Path=Index}" Header="Index" Width="100" />
                </GridView>
            </ListView.View>
            <ListView.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel></StackPanel>
                </ItemsPanelTemplate>
            </ListView.ItemsPanel>
            <!--<i:Interaction.Behaviors>
                <local:ItemsControlVisibleItemsBehavior x:Name="Behavior"></local:ItemsControlVisibleItemsBehavior>
            </i:Interaction.Behaviors>-->
        </ListView>
    </Grid>
</UserControl>