<Application x:Class="Utility.WPF.ComboBoxes.Roslyn.Demo.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:Utility.WPF.ComboBoxes.Roslyn.Demo"
             xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             xmlns:cmb="http://schemas.utility.com/ComboBoxes"
             xmlns:ref="clr-namespace:System.Reflection;assembly=System.Reflection"
             xmlns:po="http://schemas.microsoft.com/winfx/2006/xaml/presentation/options">

    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Utility.WPF.ComboBoxes.Roslyn;component/Themes/Generic.xaml"/>
            </ResourceDictionary.MergedDictionaries>

            <local:IconConverter x:Key="IconConverter"></local:IconConverter>

            <Path x:Key="Double" Stroke="Black" Stretch="Uniform" StrokeThickness="2">
                <Path.Data>
                    <GeometryGroup >
                        <PathGeometry>M27 9C27 6.23858 24.7614 4 22 4C19.2386 4 17 6.23858 17 9V19C17 21.7614 19.2386 24 22 24C24.7614 24 27 21.7614 27 19V9Z</PathGeometry>
                        <PathGeometry>M12 24H9</PathGeometry>
                    </GeometryGroup>
                </Path.Data>
            </Path>


            <!-- License: MIT. Made by Primer: https://github.com/primer/octicons -->
            <Path x:Key="Integer" Stretch="Uniform" Fill="Black" Data="M8.114 2.094a.75.75 0 01.386.656V9h1.252a.75.75 0 110 1.5H5.75a.75.75 0 010-1.5H7V4.103l-.853.533a.75.75 0 01-.795-1.272l2-1.25a.75.75 0 01.762-.02zm4.889 5.66a.75.75 0 01.75-.75h5.232a.75.75 0 01.53 1.28l-2.776 2.777c.55.097 1.057.253 1.492.483.905.477 1.504 1.284 1.504 2.418 0 .966-.471 1.75-1.172 2.27-.687.511-1.587.77-2.521.77-1.367 0-2.274-.528-2.667-.756a.75.75 0 01.755-1.297c.331.193.953.553 1.912.553.673 0 1.243-.188 1.627-.473.37-.275.566-.635.566-1.067 0-.5-.219-.836-.703-1.091-.538-.284-1.375-.443-2.471-.443a.75.75 0 01-.53-1.28l2.643-2.644h-3.421a.75.75 0 01-.75-.75zM7.88 15.215a1.4 1.4 0 00-1.446.83.75.75 0 01-1.37-.61 2.9 2.9 0 012.986-1.71 2.565 2.565 0 011.557.743c.434.446.685 1.058.685 1.778 0 1.641-1.254 2.437-2.12 2.986-.538.341-1.18.694-1.495 1.273H9.75a.75.75 0 010 1.5h-4a.75.75 0 01-.75-.75c0-1.799 1.337-2.63 2.243-3.21 1.032-.659 1.55-1.031 1.55-1.8 0-.355-.116-.584-.26-.732a1.068 1.068 0 00-.652-.298z"/>


            <!-- License: Apache. Made by Carbon Design: https://github.com/carbon-design-system/carbon -->
            <Path x:Key="String" Fill="Black" Stretch="Uniform">
                <Path.Data>
                    <GeometryGroup >
                        <PathGeometry>M29,22H24a2.0027,2.0027,0,0,1-2-2V14a2.0023,2.0023,0,0,1,2-2h5v2H24v6h5Z</PathGeometry>
                        <PathGeometry>M18,12H14V8H12V22h6a2.0027,2.0027,0,0,0,2-2V14A2.0023,2.0023,0,0,0,18,12Zm-4,8V14h4v6Z</PathGeometry>
                        <PathGeometry>M8,12H3v2H8v2H4a2,2,0,0,0-2,2v2a2,2,0,0,0,2,2h6V14A2.0023,2.0023,0,0,0,8,12Zm0,8H4V18H8Z</PathGeometry>
                    </GeometryGroup>
                </Path.Data>
            </Path>

            <Path x:Key="Boolean" Fill="Black" Stretch="Uniform">
                <Path.Data>
                    <GeometryGroup FillRule="EvenOdd">
                        <EllipseGeometry
                            Center="9,16"
                            RadiusX="7"
                            RadiusY="7" />
                        <EllipseGeometry
                            Center="23,16"
                            RadiusX="7"
                            RadiusY="7" />
                        <!-- Inner circle (hole) -->
                        <EllipseGeometry
                            Center="23,16"
                            RadiusX="5"
                            RadiusY="5" />
                    </GeometryGroup>
                </Path.Data>
            </Path>


            <Path x:Key="DateTime" Fill="Black" Stretch="Uniform">
                <Path.Data>
                    M6,7H4v2h2V7z M6,10H4v2h2V10z M9,7H7v2h2V7z M9,10H7v2h2V10z M12,7h-2v2h2V7z M12,10h-2v2h2V10z M15,2h-1v2h-3V2H5v2H2V2H1 C0.447,2,0,2.447,0,3v11c0,0.553,0.447,1,1,1h14c0.553,0,1-0.447,1-1V3C16,2.447,15.553,2,15,2z M14,13H2V6h12V13z M4,0.494 C4,0.222,3.778,0,3.506,0H3.497C3.222,0,3,0.222,3,0.494V3h1V0.494z M13,0.494C13,0.222,12.778,0,12.506,0h-0.009 C12.222,0,12,0.222,12,0.494V3h1V0.494z
                </Path.Data>
            </Path>

            <Path x:Key="Cancel" Stroke="Black" StrokeThickness="4" Stretch="Uniform">
                <Path.Data>
                    M0,0L16,16M16,0L0,16
                </Path.Data>
            </Path>

            <Path x:Key="Plus" StrokeThickness="2" Stroke="Black"  Stretch="Uniform">
                <Path.Data>
                    <PathGeometry>
                        <PathGeometry.Figures>
                            <PathFigure StartPoint="0,1">
                                <LineSegment Point="0,-1" />
                            </PathFigure>
                            <PathFigure StartPoint="1,0">
                                <LineSegment Point="-1,0" />
                            </PathFigure>
                        </PathGeometry.Figures>
                    </PathGeometry>
                </Path.Data>

            </Path>

            <ObjectDataProvider x:Key="MyEnumValues"
                    MethodName="GetValues"
                    ObjectType="{x:Type sys:Enum}">
                <ObjectDataProvider.MethodParameters>
                    <x:Type TypeName="local:CommonTypes"/>
                </ObjectDataProvider.MethodParameters>
            </ObjectDataProvider>

            <DataTemplate x:Key="BooleanTemplate">
                <CheckBox Content="{Binding Name}"
                          IsThreeState="False"
                          IsChecked="{Binding Value}"
                          />
            </DataTemplate>



            <DataTemplate x:Key="EnumTemplate">
                <ListBox
                    SelectedItem="{Binding Value, Mode=TwoWay}"
                    ItemsSource="{Binding Source={StaticResource MyEnumValues}}"
                   >
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <ContentControl Width="10" Height="10" Content="{Binding Converter={StaticResource IconConverter}}"></ContentControl>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel></WrapPanel>
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
                    <ListBox.ItemContainerStyle>
                        <Style TargetType="ListBoxItem">
                            <Setter Property="Margin" Value="4"/>
                            <Style.Triggers>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="BorderBrush" Value="DodgerBlue"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </ListBox.ItemContainerStyle>
                </ListBox>
            </DataTemplate>


            <ControlTemplate x:Key="ComboBox_ToggleButton" TargetType="{x:Type ToggleButton}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <Border
             Name="Border"
             Grid.ColumnSpan="2"
             Background="Transparent"
             BorderBrush="#FF97A0A5"
             BorderThickness="0"
             CornerRadius="0" />
                    <!--<Border Grid.Column="0" CornerRadius="0" Margin="2,2,2,2" BorderBrush="#FF97A0A5" BorderThickness="1" />-->
                    <ContentPresenter x:Name="Icon" />
                    <!--<Path Name="Arrow" Grid.Column="1" Fill="Black" Margin="0,0,4,0" HorizontalAlignment="Center" VerticalAlignment="Center" Data="F0 M 0,0 L 0,2 4,6 8,2 8,0 4,4 Z" />-->
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="UIElement.IsMouseOver" Value="true">
                        <Setter TargetName="Border" Property="Background" Value="#AAAAAA" />
                    </Trigger>

                    <Trigger Property="ToggleButton.IsChecked" Value="true">
                        <Setter TargetName="Border" Property="Background" Value="#E0E0E0" />
                        <!--<Setter TargetName="Icon" Property="Spin" Value="True" />-->
                        <!--<Setter TargetName="Icon" Property="Foreground" Value="#FF97A0A5" />-->
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter TargetName="Border" Property="Background" Value="#EEEEEE" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="#AAAAAA" />
                        <Setter Property="Foreground" Value="#888888" />
                        <!--<Setter TargetName="Arrow" Property="Fill" Value="#888888" />-->
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>

            <Style x:Key="CustomWhiteBackgroundStyle" TargetType="{x:Type ComboBox}" BasedOn="{StaticResource VisualStudio_Roslyn_Style}">
                <Setter Property="Background" Value="White"></Setter>
            </Style>

            <Style x:Key="CustomToggleButtonStyle" TargetType="{x:Type ComboBox}" BasedOn="{StaticResource VisualStudio_Roslyn_Style}">
                <Setter Property="Width" Value="24"></Setter>
                <Setter Property="cmb:ComboBoxEx.ToggleButtonStyle">
                    <Setter.Value>
                        <Style TargetType="ToggleButton">
                            <Setter Property="Template" Value="{StaticResource ComboBox_ToggleButton}"/>
                            <Setter Property="Content" Value="{StaticResource Plus}"/>
                            <Style.Triggers>
                                <Trigger Property="IsChecked" Value="True">
                                    <Setter Property="Visibility" Value="Collapsed"></Setter>

                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Setter.Value>
                </Setter>
                <Setter Property="ItemContainerStyle">
                    <Setter.Value>
                        <Style TargetType="ComboBoxItem">

                            <Setter Property="Padding" Value="6,4"/>
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="ComboBoxItem">

                                        <Border x:Name="Border"  
                                                    BorderThickness="0"
                                                    Background="{StaticResource HatchBrush}"
                                                    Padding="{TemplateBinding Padding}">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                <ContentPresenter/>
                                                <CheckBox Grid.Column="1" 
                                                          IsChecked="{Binding Content.IsChecked,RelativeSource={RelativeSource Mode=TemplatedParent}}">                                                    
                                                </CheckBox>
                                            </Grid>
                                        </Border>

                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Setter.Value>
                </Setter>
                <Style.Triggers>
                    <Trigger Property="IsDropDownOpen" Value="True">
                        <Setter Property="Width" Value="200"></Setter>

                    </Trigger>
                </Style.Triggers>
            </Style>

            <Style x:Key="HeaderedContentControlStyle" TargetType="HeaderedContentControl">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="HeaderedContentControl">
                            <Border  CornerRadius="4">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="0.1*"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="0.5*"/>
                                    </Grid.RowDefinitions>

                                    <Border Grid.Row="1" Background="GhostWhite" 
                           Padding="16,12" HorizontalAlignment="Center">
                                        <ContentPresenter ContentSource="Header"
                                       TextElement.Foreground="Gray"
                                       TextElement.FontSize="16"
                                       TextElement.FontWeight="Medium"/>
                                    </Border>

                                    <ContentPresenter Grid.Row="2" Margin="8"/>
                                </Grid>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>


        </ResourceDictionary>
    </Application.Resources>
</Application>
