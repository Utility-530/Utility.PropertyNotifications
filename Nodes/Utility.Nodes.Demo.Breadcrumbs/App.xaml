<Application x:Class="Utility.Nodes.Breadcrumbs.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:Utility.Nodes.Breadcrumbs"
             xmlns:inf="clr-namespace:Utility.Nodes;assembly=Utility.Nodes"
             xmlns:model="clr-namespace:Utility.Models;assembly=Utility.Models"
             xmlns:trees="clr-namespace:Utility.Models.Trees;assembly=Utility.Models.Trees"
             xmlns:bc="http://schemas.utility.com/Breadcrumbs"
             >
    <Application.Resources>

        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Utility.WPF.Controls.Breadcrumbs;component/Themes/Generic.xaml"/>
            </ResourceDictionary.MergedDictionaries>

            <HierarchicalDataTemplate DataType="{x:Type inf:NodeViewModel}" ItemsSource="{Binding Children}">
                <Border BorderBrush="CadetBlue" BorderThickness="2" TextBlock.FontSize="16">
                    <ContentControl Content="{Binding Data}" Margin="4" />
                </Border>
            </HierarchicalDataTemplate>

            <DataTemplate DataType="{x:Type model:Model}">
                <TextBlock Text="{Binding Name}">
                </TextBlock>
            </DataTemplate>

            <DataTemplate DataType="{x:Type trees:ValueModel}">
                <TextBox Text="{Binding Value}" Width="60" Height="25" Background="LightSalmon"/>
            </DataTemplate>

            <bc:ItemContainerStyleSelector x:Key="StyleSelector"
                                           SelectableStyle="{StaticResource SelectedTreeViewItem}"
                                           BreadcrumbRootStyle="{StaticResource BreadCrumbRootTreeViewItem}"
                                           BreadcrumbStyle="{StaticResource BreachCrumb}">
            </bc:ItemContainerStyleSelector>


            <DataTemplate x:Key="main" DataType="{x:Type inf:NodeViewModel}" >
                <DockPanel>
                    <Button DockPanel.Dock="Top" FontSize="10" Width="50" Click="Button_Click">SAVE</Button>
                    <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                        <bc:BreadCrumbTree   
                ItemsSource="{Binding Children}" 
                ItemContainerStyleSelector="{StaticResource StyleSelector}"/>
                    </Grid>
                </DockPanel>
            </DataTemplate>
        </ResourceDictionary>

    </Application.Resources>
</Application>
